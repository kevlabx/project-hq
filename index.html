<!doctype html>
<html lang="en" data-theme="dark" data-contrast="high">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>LoomPages Project HQ — 10-Day Challenge</title>
  <meta name="description" content="10-day guided web project. Local-only progress. Follow the white rabbit." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="story-on">
  <noscript>
    <div style="padding:12px;border:1px solid #c00;background:#300;color:#fff;margin:12px;border-radius:8px;">
      This app needs JavaScript enabled.
    </div>
  </noscript>

  <header class="site-header" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">LP</div>
      <div class="title">LoomPages Project HQ</div>
      <div class="subtitle small muted">
        Ship LoomPages in 10 days • All progress stays on your device • Designed by Kevin
      </div>
    </div>

    <!-- Primary nav (wired by app.js) -->
    <nav class="nav" aria-label="Primary">
      <button class="pill" data-nav="dashboard" aria-label="Overview">Overview</button>
      <button class="pill" data-nav="days" aria-label="Days">Days</button>
      <button class="pill" data-nav="prompts" aria-label="Prompts">Prompts</button>
      <button class="pill" data-nav="cheatsheet" aria-label="Cheat Sheet">Cheat Sheet</button>
      <button class="pill" data-nav="commands" aria-label="Commands">Commands</button>
      <button class="pill" data-nav="agents" aria-label="Agents">Agents</button>
      <button class="pill" id="btn-terminal" aria-haspopup="dialog" aria-controls="terminal-overlay" aria-label="Open Operator Terminal">Terminal</button>
    </nav>

    <!-- Right-side actions -->
    <div class="actions">
      <button id="btn-edit" class="pill" aria-pressed="false">Edit: Off</button>
      <button id="btn-jack" class="pill" aria-pressed="false" data-label-off="Jack In" data-label-on="Unjack">Jack In</button>

      <div class="menu">
        <button id="btn-export" class="pill" aria-label="Construct Upload (Export)">Construct Upload</button>
      </div>

      <div class="menu">
        <button id="btn-import" class="pill" aria-label="Memory Retrieve (Import)">Memory Retrieve</button>
        <input id="file-import" type="file" accept="application/json" hidden />
      </div>

      <button id="btn-reset" class="pill danger" aria-label="Reset all data">Reset</button>

      <!-- Settings popover -->
      <div class="menu settings">
        <button id="btn-settings" class="pill" aria-expanded="false" aria-controls="settings-panel">Settings</button>
        <div id="settings-panel" class="menu-panel" role="menu">
          <label class="row" role="menuitemcheckbox" aria-checked="true">
            <input type="checkbox" id="set-contrast" checked />
            <span>High contrast</span>
          </label>
          <label class="row" role="menuitemcheckbox" aria-checked="false">
            <input type="checkbox" id="set-theme" />
            <span>Day mode</span>
          </label>
          <label class="row" role="menuitemcheckbox" aria-checked="true">
            <input type="checkbox" id="set-story" checked />
            <span>Story mode</span>
          </label>
          <label class="row" role="menuitemcheckbox" aria-checked="false">
            <input type="checkbox" id="set-console" />
            <span>Console theme</span>
          </label>
          <label class="row" role="menuitemcheckbox" aria-checked="false">
            <input type="checkbox" id="set-sfx" />
            <span>Sound effects</span>
          </label>
          <label class="row" role="menuitemcheckbox" aria-checked="false">
            <input type="checkbox" id="set-haptics" />
            <span>Haptics (mobile)</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Operator status (updated by app.js) -->
    <div id="operator" class="operator" aria-live="polite">
      Operator: link secure • local save OK • streak 0 • trace risk low
    </div>
  </header>

  <!-- Main render target; app.js injects all views here -->
  <main id="app" class="site-main" role="main">
    <section class="panel">Loading…</section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div>Tip: Export your progress JSON regularly as a backup.</div>
    <div id="last-saved" class="muted small"></div>
  </footer>

  <!-- Toast host (used by toast() in app.js) -->
  <div id="toasts" aria-live="polite" aria-atomic="true"></div>

  <!-- Operator Terminal (command palette) -->
  <div id="terminal-overlay" class="terminal hidden" role="dialog" aria-modal="true" aria-labelledby="terminal-title">
    <div class="terminal-box" role="document">
      <div class="terminal-header">
        <div id="terminal-title">Operator Terminal</div>
        <button class="pill" id="terminal-close" aria-label="Close terminal">Esc</button>
      </div>
      <div class="terminal-body" tabindex="0">
        <pre class="crt" aria-label="Terminal help">
&gt; help
  • go d1..d10   – open day
  • view plan    – scroll to mission rail
  • jack in      – focus mode on/off
  • upload       – export JSON
  • retrieve     – import JSON
  • theme        – toggle day/dark/console
  • story        – story mode on/off
  • cheatsheet   – open cheat sheet
  • commands     – open commands
        </pre>
      </div>
    </div>
  </div>

  <!-- Optional SFX (app.js is defensive if sources are empty) -->
  <audio id="sfx-copy" preload="auto">
    <source src="" type="audio/mpeg" />
  </audio>
  <audio id="sfx-complete" preload="auto">
    <source src="" type="audio/mpeg" />
  </audio>

  <!-- Modal root for future overlays -->
  <div id="modal-root"></div>

  <script src="app.js"></script>
</body>
</html>
